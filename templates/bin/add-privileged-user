#!/bin/bash
# add-privileged-user [user] [password]

set -e

if [ "$#" -ne "2" ]; then
  echo 'Usage: add-sftp-user [user] [password]'
  exit 1
fi

user=$1
password=$2

# Generate user from user / password
id $user &> /dev/null || adduser $user --disabled-password --gecos "Admin"
usermod -G $user,sudo $user
usermod -s /bin/bash $user
echo $user:$password | chpasswd
